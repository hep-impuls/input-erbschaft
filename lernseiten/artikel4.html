<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artikel: Wo wohnen die Superreichen? - hep Verlag</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #003876 0%, #5eb9b4 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: #003876;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .article-link {
            background: #f8f9fa;
            border-left: 4px solid #5eb9b4;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .article-link h2 {
            color: #003876;
            margin-bottom: 10px;
        }

        .article-link a {
            display: inline-block;
            background: #5eb9b4;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .article-link a:hover {
            background: #4a9a95;
        }

        /* === ZITATE-SLIDESHOW === */
        .quotes-section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            position: relative;
            min-height: 400px;
        }

        .quotes-section h2 {
            color: #003876;
            margin-bottom: 20px;
            text-align: center;
        }

        .slide {
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .slide.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            border-left: 5px solid #5eb9b4;
            min-height: 250px;
        }

        .slide-title {
            font-size: 1.5em;
            color: #003876;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .slide-text {
            font-size: 1.1em;
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
        }

        .slide-highlight {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .slide-quote {
            background: #f0f8f0;
            border-left: 5px solid #5eb9b4;
            padding: 20px;
            margin: 15px 0;
            font-style: italic;
            border-radius: 5px;
        }

        .slide-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: linear-gradient(135deg, #003876, #5eb9b4);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .slide-progress {
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: #003876;
        }

        .slide-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .slide-btn {
            background: #5eb9b4;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .slide-btn:hover {
            background: #4a9a95;
        }

        .slide-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* === INTERAKTIVE AKTIVITÄTEN === */
        .interactive-section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .interactive-section.unlocked {
            display: block;
        }

        .interactive-section h2 {
            color: #003876;
            margin-bottom: 20px;
            text-align: center;
        }

        .activity-progress {
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            color: #003876;
        }

        /* Kantons-Ranking */
        .ranking-game {
            margin-top: 25px;
        }

        .canton-pool {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .canton-chip {
            background: linear-gradient(135deg, #003876, #5eb9b4);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-align: center;
            cursor: move;
            font-weight: 600;
            transition: all 0.3s;
            user-select: none;
        }

        .canton-chip:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .canton-chip.dragging {
            opacity: 0.5;
        }

        .canton-chip.placed {
            background: #4caf50;
            cursor: default;
        }

        .ranking-drops {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .drop-zone {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: white;
            border: 3px dashed #e0e0e0;
            border-radius: 10px;
            min-height: 80px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            border-color: #5eb9b4;
            background: #e8f4f8;
        }

        .drop-zone.correct {
            border-color: #4caf50;
            background: #e8f5e9;
            border-style: solid;
        }

        .drop-zone.incorrect {
            border-color: #f44336;
            background: #ffebee;
            border-style: solid;
        }

        .drop-zone-position {
            font-size: 1.5em;
            font-weight: bold;
            color: #003876;
            min-width: 80px;
        }

        .drop-zone-content {
            flex: 1;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .check-btn {
            background: #5eb9b4;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .check-btn:hover {
            background: #4a9a95;
            transform: translateY(-2px);
        }

        .check-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .activity-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .activity-feedback.show {
            display: block;
        }

        .activity-feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .activity-feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        /* Zahlen-Matching */
        .matching-game {
            margin-top: 25px;
        }

        .matching-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .matching-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .matching-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .matching-card.selected {
            border-color: #5eb9b4;
            background: #e8f4f8;
        }

        .matching-card.correct {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .matching-card.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .matching-number {
            font-size: 2em;
            font-weight: bold;
            color: #003876;
            text-align: center;
            margin-bottom: 10px;
        }

        .matching-question {
            font-size: 1em;
            text-align: center;
            color: #666;
        }

        /* Faktencheck */
        .facts-section {
            display: none;
        }

        .facts-section.unlocked {
            display: block;
        }

        .fact-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .fact-statement {
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #003876;
            font-weight: 600;
            line-height: 1.6;
        }

        .fact-buttons {
            display: flex;
            gap: 15px;
        }

        .fact-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .fact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .fact-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .fact-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .fact-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .fact-feedback.show {
            display: block;
        }

        .fact-feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .fact-feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        /* === QUIZ (GESPERRT) === */
        .quiz-section {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 3px solid #5eb9b4;
            position: relative;
        }

        .quiz-section.locked {
            opacity: 0.5;
            pointer-events: none;
        }

        .quiz-lock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 56, 118, 0.95);
            color: white;
            padding: 30px 40px;
            border-radius: 10px;
            text-align: center;
            z-index: 10;
            display: none;
        }

        .quiz-section.locked .quiz-lock-overlay {
            display: block;
        }

        .quiz-section h2 {
            color: #003876;
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        .question {
            background: #f8f9fa;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .question.active {
            display: block;
        }

        .question.answered {
            border-color: #5eb9b4;
        }

        .question h3 {
            color: #003876;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: white;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #5eb9b4;
            transform: translateX(5px);
        }

        .option.selected {
            background: #5eb9b4;
            color: white;
            border-color: #5eb9b4;
        }

        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        .next-button {
            background: #003876;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1em;
            transition: background 0.3s;
            display: none;
        }

        .next-button.show {
            display: inline-block;
        }

        .next-button:hover {
            background: #002855;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #003876, #5eb9b4);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            color: #003876;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .unlock-badge {
            display: inline-block;
            background: #4caf50;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }

        .nav-button {
            background: #5eb9b4;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            text-decoration: none;
            display: inline-block;
            transition: background 0.3s;
        }

        .nav-button:hover {
            background: #4a9a95;
        }

        .nav-button.secondary {
            background: #003876;
        }

        .nav-button.secondary:hover {
            background: #002855;
        }

        .completion-message {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-top: 30px;
            display: none;
        }

        .completion-message.show {
            display: block;
        }

        .completion-message h3 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }

            .slide-stats, .canton-pool, .matching-grid {
                grid-template-columns: 1fr;
            }

            .fact-buttons {
                flex-direction: column;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🗺️ Artikel: Wo wohnen die Superreichen?</h1>
            <p>Hier wohnen die Superreichen, die sich vor den Juso fürchten</p>
        </div>

        <div class="content">
            <div class="article-link">
                <h2>📄 Originalartikel</h2>
                <p><strong>Autor:</strong> Mischa Aebi</p>
                <p><strong>Thema:</strong> Erstmals Auswertung für die gesamte Schweiz – wo die rund 2800 von der Juso-Initiative betroffenen Multimillionäre wohnen</p>
                <a href="https://www.tagesanzeiger.ch/auswertung-zeigt-erstmals-wo-die-250-reichsten-schweizer-wohnen-110651171951" target="_blank">Artikel im Original lesen →</a>
            </div>

            <!-- === ZITATE-SLIDESHOW === -->
            <div class="quotes-section">
                <h2>📖 Kernaussagen des Artikels</h2>
                <div class="slide-progress" id="slide-progress">Seite 1 von 8</div>

                <!-- Slide 1 -->
                <div class="slide active" data-slide="1">
                    <div class="slide-content">
                        <div class="slide-title">🇨🇭 Die Superreichen der Schweiz</div>
                        <div class="slide-text">
                            In der Schweiz leben rund <strong>2800 Personen mit einem Vermögen von über 50 Millionen Franken</strong> – genau jene, die von der Juso-Initiative betroffen wären.
                        </div>
                        <div class="slide-stats">
                            <div class="stat-box">
                                <div class="stat-number">2800</div>
                                <div class="stat-label">Superreiche in der Schweiz</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">500 Mrd.</div>
                                <div class="stat-label">CHF Gesamtvermögen</div>
                            </div>
                        </div>
                        <div class="slide-highlight">
                            <strong>Entwicklung:</strong> Von 760 Superreichen im Jahr 2005 auf über 2500 im Jahr 2021 – eine <strong>Verdreifachung</strong> in nur 16 Jahren!
                        </div>
                    </div>
                </div>

                <!-- Slide 2 -->
                <div class="slide" data-slide="2">
                    <div class="slide-content">
                        <div class="slide-title">🏔️ Hergiswil NW – Das Millionärsdorf</div>
                        <div class="slide-text">
                            In Hergiswil mit 6'300 Einwohnern leben <strong>59 Superreiche</strong>. Das bedeutet: <strong>Jeder hundertste Einwohner</strong> besitzt mindestens 50 Millionen Franken!
                        </div>
                        <div class="slide-quote">
                            «Wenn alle Betroffenen wegziehen, müssten wir die Steuern theoretisch verdoppeln. Wer heute 20'000 Franken zahlt, müsste künftig 40'000 Franken aufbringen.»
                            <br><br><strong>— Daniel Rogenmoser, Gemeindepräsident Hergiswil</strong>
                        </div>
                    </div>
                </div>

                <!-- Slide 3 -->
                <div class="slide" data-slide="3">
                    <div class="slide-content">
                        <div class="slide-title">🏆 Kantone mit höchster Superreichen-Dichte</div>
                        <div class="slide-text">
                            Pro 10'000 Einwohner haben folgende Kantone die meisten Superreichen:
                        </div>
                        <div class="slide-stats">
                            <div class="stat-box">
                                <div class="stat-number">🥇 22</div>
                                <div class="stat-label">Nidwalden</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">🥈 18</div>
                                <div class="stat-label">Schwyz</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">🥉 18</div>
                                <div class="stat-label">Zug</div>
                            </div>
                        </div>
                        <div class="slide-highlight">
                            Zum Vergleich: Aargau, Freiburg, Jura und Neuenburg haben weniger als 1 Superreichen pro 10'000 Einwohner.
                        </div>
                    </div>
                </div>

                <!-- Slide 4 -->
                <div class="slide" data-slide="4">
                    <div class="slide-content">
                        <div class="slide-title">💰 Bedeutung für die Steuereinnahmen</div>
                        <div class="slide-text">
                            Die 2800 Superreichen zahlen schweizweit:
                        </div>
                        <div class="slide-stats">
                            <div class="stat-box">
                                <div class="stat-number">27%</div>
                                <div class="stat-label">der Vermögenssteuern</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">3,1%</div>
                                <div class="stat-label">der Einkommenssteuern</div>
                            </div>
                        </div>
                        <div class="slide-highlight">
                            <strong>Kanton Zug (250 Superreiche):</strong><br>
                            • 55% der Vermögenssteuern<br>
                            • 15% der Einkommenssteuern
                        </div>
                    </div>
                </div>

                <!-- Slide 5 -->
                <div class="slide" data-slide="5">
                    <div class="slide-content">
                        <div class="slide-title">⚠️ Der Exodus hat bereits begonnen</div>
                        <div class="slide-quote">
                            <strong>Michele Blöchliger, Finanzdirektorin Nidwalden:</strong><br>
                            Erste sind «mit explizitem Verweis auf die Juso-Initiative» weggezogen. Seit Monaten bleiben vermögende Neuzuzüger aus dem Ausland aus.
                        </div>
                        <div class="slide-quote">
                            <strong>Markus Beeler, Steuerverwaltung Schwyz:</strong><br>
                            20 Jahre lang Jahr für Jahr Zuwachs von potenten Steuerzahlern. Seit 2 Jahren: «kaum noch Zuzüger in diesen höchsten Vermögensklassen».
                        </div>
                    </div>
                </div>

                <!-- Slide 6 -->
                <div class="slide" data-slide="6">
                    <div class="slide-content">
                        <div class="slide-title">😊 Nur Zug lacht noch</div>
                        <div class="slide-quote">
                            «Trotz aller Befürchtungen im Zusammenhang mit der Erbschaftssteuerinitiative» seien in Zug keine vermögenden Personen weggezogen. <strong>«Im Gegenteil. Wir verzeichneten weiterhin einen Zuwachs an Steuerzahlern mit sehr grossem Vermögen.»</strong>
                            <br><br>Er könne sich selber nicht erklären, warum das «Interesse von reichen Ausländern an unserem Kanton ungebrochen hoch» sei.
                            <br><br><strong>— Heinz Tännler, Zuger Finanzdirektor</strong>
                        </div>
                    </div>
                </div>

                <!-- Slide 7 -->
                <div class="slide" data-slide="7">
                    <div class="slide-content">
                        <div class="slide-title">📉 Drohende Steuerausfälle</div>
                        <div class="slide-quote">
                            Zürich würde nach einer Annahme der Initiative laut Berechnungen <strong>340 Millionen Franken weniger</strong> an Steuern einnehmen. Das entspricht ungefähr 10 Prozent der Einkommenssteuern von natürlichen Personen.
                            <br><br><strong>— Reto Föllmi, Professor für Volkswirtschaftslehre, Uni St. Gallen</strong>
                        </div>
                    </div>
                </div>

                <!-- Slide 8 -->
                <div class="slide" data-slide="8">
                    <div class="slide-content">
                        <div class="slide-title">🎯 Zwei gegensätzliche Positionen</div>
                        <div class="slide-quote">
                            «Mitten vor unseren Augen entsteht gerade nichts weniger als eine neue Oligarchie. Die Konzentration von Geld und Macht bei wenigen führt zu Gewalt und gefährdet die Freiheit.»
                            <br><br><strong>— Cédric Wermuth, SP-Co-Präsident</strong>
                        </div>
                        <div class="slide-quote">
                            Der «rasante Anstieg» der Vermögen zeige, dass Superreiche nicht richtig besteuert werden. Resultat: Mittelstandsfamilien zahlen teilweise prozentual mehr als Multimillionäre.
                            <br><br><strong>— Mirjam Hostetmann, Juso-Präsidentin</strong>
                        </div>
                    </div>
                </div>

                <div class="slide-nav">
                    <button class="slide-btn" id="prev-slide" onclick="changeSlide(-1)" disabled>← Zurück</button>
                    <button class="slide-btn" id="next-slide" onclick="changeSlide(1)">Weiter →</button>
                </div>
            </div>

            <!-- === SCHRITT 1: KANTONS-RANKING === -->
            <div class="interactive-section" id="ranking-section">
                <h2>📊 Schritt 1: Kantons-Ranking</h2>
                <p style="text-align: center; margin-bottom: 20px;">Ordnen Sie die Kantone nach ihrer Multimillionärs-Dichte (pro 10'000 Einwohner). Ziehen Sie die Kantone von oben (höchste Dichte) nach unten.</p>
                <div class="activity-progress" id="ranking-progress">0 von 6 Kantonen zugeordnet</div>
                
                <div class="ranking-game">
                    <div class="canton-pool" id="canton-pool">
                        <div class="canton-chip" draggable="true" data-canton="nidwalden" data-rank="1">Nidwalden (22)</div>
                        <div class="canton-chip" draggable="true" data-canton="schwyz" data-rank="2">Schwyz (18)</div>
                        <div class="canton-chip" draggable="true" data-canton="zug" data-rank="3">Zug (18)</div>
                        <div class="canton-chip" draggable="true" data-canton="basel" data-rank="4">Basel-Stadt (4)</div>
                        <div class="canton-chip" draggable="true" data-canton="genf" data-rank="5">Genf (3)</div>
                        <div class="canton-chip" draggable="true" data-canton="aargau" data-rank="6">Aargau (<1)</div>
                    </div>

                    <div class="ranking-drops">
                        <div class="drop-zone" data-rank="1">
                            <div class="drop-zone-position">🥇 Platz 1</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-rank="2">
                            <div class="drop-zone-position">🥈 Platz 2</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-rank="3">
                            <div class="drop-zone-position">🥉 Platz 3</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-rank="4">
                            <div class="drop-zone-position">4️⃣ Platz 4</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-rank="5">
                            <div class="drop-zone-position">5️⃣ Platz 5</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-rank="6">
                            <div class="drop-zone-position">6️⃣ Platz 6</div>
                            <div class="drop-zone-content"></div>
                        </div>
                    </div>

                    <button class="check-btn" id="check-ranking" onclick="checkRanking()">Überprüfen</button>
                    <div class="activity-feedback" id="ranking-feedback"></div>
                </div>
            </div>

            <!-- === SCHRITT 2: ZAHLEN ZUORDNEN === -->
            <div class="interactive-section" id="matching-section">
                <h2>🔢 Schritt 2: Zahlen zuordnen</h2>
                <p style="text-align: center; margin-bottom: 20px;">Welche Zahl gehört wozu? Klicken Sie auf die richtige Karte.</p>
                <div class="activity-progress" id="matching-progress">0 von 4 Fragen beantwortet</div>

                <!-- Frage 1 -->
                <div style="margin-bottom: 30px;">
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-weight: 600;">
                        Wie viele Superreiche leben in Hergiswil (6'300 Einwohner)?
                    </div>
                    <div class="matching-grid">
                        <div class="matching-card" data-question="1" data-answer="wrong">
                            <div class="matching-number">30</div>
                            <div class="matching-question">Personen</div>
                        </div>
                        <div class="matching-card" data-question="1" data-answer="correct">
                            <div class="matching-number">59</div>
                            <div class="matching-question">Personen</div>
                        </div>
                        <div class="matching-card" data-question="1" data-answer="wrong">
                            <div class="matching-number">100</div>
                            <div class="matching-question">Personen</div>
                        </div>
                    </div>
                    <div class="activity-feedback" id="matching-feedback-1"></div>
                </div>

                <!-- Frage 2 -->
                <div style="margin-bottom: 30px;">
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-weight: 600;">
                        Wie viel Prozent der Vermögenssteuern zahlen die 2800 Superreichen schweizweit?
                    </div>
                    <div class="matching-grid">
                        <div class="matching-card" data-question="2" data-answer="wrong">
                            <div class="matching-number">15%</div>
                            <div class="matching-question">der Vermögenssteuern</div>
                        </div>
                        <div class="matching-card" data-question="2" data-answer="correct">
                            <div class="matching-number">27%</div>
                            <div class="matching-question">der Vermögenssteuern</div>
                        </div>
                        <div class="matching-card" data-question="2" data-answer="wrong">
                            <div class="matching-number">50%</div>
                            <div class="matching-question">der Vermögenssteuern</div>
                        </div>
                    </div>
                    <div class="activity-feedback" id="matching-feedback-2"></div>
                </div>

                <!-- Frage 3 -->
                <div style="margin-bottom: 30px;">
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-weight: 600;">
                        Mit welchen Steuerausfällen müsste Zürich bei Annahme der Initiative rechnen?
                    </div>
                    <div class="matching-grid">
                        <div class="matching-card" data-question="3" data-answer="wrong">
                            <div class="matching-number">200 Mio.</div>
                            <div class="matching-question">CHF Steuerausfälle</div>
                        </div>
                        <div class="matching-card" data-question="3" data-answer="correct">
                            <div class="matching-number">340 Mio.</div>
                            <div class="matching-question">CHF Steuerausfälle</div>
                        </div>
                        <div class="matching-card" data-question="3" data-answer="wrong">
                            <div class="matching-number">500 Mio.</div>
                            <div class="matching-question">CHF Steuerausfälle</div>
                        </div>
                    </div>
                    <div class="activity-feedback" id="matching-feedback-3"></div>
                </div>

                <!-- Frage 4 -->
                <div style="margin-bottom: 30px;">
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-weight: 600;">
                        Um wie viel haben sich die Superreichen in der Schweiz zwischen 2005 und 2021 vermehrt?
                    </div>
                    <div class="matching-grid">
                        <div class="matching-card" data-question="4" data-answer="wrong">
                            <div class="matching-number">Verdoppelt</div>
                            <div class="matching-question">von 760 auf ~1500</div>
                        </div>
                        <div class="matching-card" data-question="4" data-answer="correct">
                            <div class="matching-number">Verdreifacht</div>
                            <div class="matching-question">von 760 auf 2500</div>
                        </div>
                        <div class="matching-card" data-question="4" data-answer="wrong">
                            <div class="matching-number">Vervierfacht</div>
                            <div class="matching-question">von 760 auf 3000</div>
                        </div>
                    </div>
                    <div class="activity-feedback" id="matching-feedback-4"></div>
                </div>
            </div>

            <!-- === SCHRITT 3: FAKTENCHECK === -->
            <div class="interactive-section facts-section" id="facts-section">
                <h2>✅ Schritt 3: Faktencheck</h2>
                <p style="text-align: center; margin-bottom: 20px;">Richtig oder falsch? Entscheiden Sie bei den folgenden Aussagen.</p>
                <div class="activity-progress" id="facts-progress">0 von 4 Aussagen beantwortet</div>

                <div class="fact-card" data-fact="1" data-correct="true">
                    <div class="fact-statement">
                        In Hergiswil ist jeder hundertste Einwohner ein Superreicher mit mindestens 50 Millionen Franken Vermögen.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">✓ Richtig</button>
                        <button class="fact-btn" data-answer="false">✗ Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>

                <div class="fact-card" data-fact="2" data-correct="false">
                    <div class="fact-statement">
                        Alle Kantone verzeichnen einen Exodus von Superreichen aufgrund der Juso-Initiative – auch der Kanton Zug verliert vermögende Steuerzahler.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">✓ Richtig</button>
                        <button class="fact-btn" data-answer="false">✗ Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>

                <div class="fact-card" data-fact="3" data-correct="true">
                    <div class="fact-statement">
                        Im Kanton Zug zahlen 250 Superreiche 55% der Vermögenssteuern und 15% der Einkommenssteuern.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">✓ Richtig</button>
                        <button class="fact-btn" data-answer="false">✗ Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>

                <div class="fact-card" data-fact="4" data-correct="true">
                    <div class="fact-statement">
                        Nidwalden weist mit 22 Superreichen pro 10'000 Einwohner die höchste Multimillionärs-Dichte aller Kantone auf.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">✓ Richtig</button>
                        <button class="fact-btn" data-answer="false">✗ Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>
            </div>

            <!-- === QUIZ (GESPERRT) === -->
            <div class="quiz-section locked" id="quiz-section">
                <div class="quiz-lock-overlay">
                    <h3>🔒 Lernkontrollen gesperrt</h3>
                    <p>Bitte schließen Sie erst alle drei interaktiven Aktivitäten ab, um die Lernkontrollen freizuschalten.</p>
                </div>

                <h2>📝 Lernkontrollen zum Artikel</h2>
                <div class="progress-text">Fortschritt: <span id="quiz-progress">0/6</span> Fragen beantwortet</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <!-- Frage 1 -->
                <div class="question active" data-question="1">
                    <h3>Frage 1 von 6: Wie viele Superreiche mit über 50 Millionen Franken Vermögen leben in Hergiswil (6'300 Einwohner)?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">15 Personen</div>
                        <div class="option" data-answer="wrong">30 Personen</div>
                        <div class="option" data-answer="correct">59 Personen (jeder hundertste Einwohner)</div>
                        <div class="option" data-answer="wrong">100 Personen</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Nächste Frage →</button>
                </div>

                <!-- Frage 2 -->
                <div class="question" data-question="2">
                    <h3>Frage 2 von 6: Welcher Kanton hat die höchste Multimillionärs-Dichte (pro 10'000 Einwohner)?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Zug</div>
                        <div class="option" data-answer="wrong">Zürich</div>
                        <div class="option" data-answer="correct">Nidwalden (22 Superreiche pro 10'000 Einwohner)</div>
                        <div class="option" data-answer="wrong">Schwyz</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Nächste Frage →</button>
                </div>

                <!-- Frage 3 -->
                <div class="question" data-question="3">
                    <h3>Frage 3 von 6: Wie viel Prozent der schweizerischen Vermögenssteuern zahlen die rund 2800 Superreichen?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">10 Prozent</div>
                        <div class="option" data-answer="wrong">15 Prozent</div>
                        <div class="option" data-answer="correct">27 Prozent</div>
                        <div class="option" data-answer="wrong">50 Prozent</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Nächste Frage →</button>
                </div>

                <!-- Frage 4 -->
                <div class="question" data-question="4">
                    <h3>Frage 4 von 6: Welcher Kanton verzeichnet überraschenderweise weiterhin einen Zuwachs an Superreichen trotz der Juso-Initiative?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Nidwalden</div>
                        <div class="option" data-answer="wrong">Schwyz</div>
                        <div class="option" data-answer="correct">Zug</div>
                        <div class="option" data-answer="wrong">Zürich</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Nächste Frage →</button>
                </div>

                <!-- Frage 5 -->
                <div class="question" data-question="5">
                    <h3>Frage 5 von 6: Um wie viel hat sich die Zahl der Superreichen in der Schweiz zwischen 2005 und 2021 verändert?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Sie blieb etwa gleich</div>
                        <div class="option" data-answer="wrong">Sie verdoppelte sich</div>
                        <div class="option" data-answer="correct">Sie verdreifachte sich (von 760 auf 2500)</div>
                        <div class="option" data-answer="wrong">Sie stieg um 50%</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Nächste Frage →</button>
                </div>

                <!-- Frage 6 -->
                <div class="question" data-question="6">
                    <h3>Frage 6 von 6: Mit welchen Steuerausfällen müsste Zürich laut Reto Föllmi bei Annahme der Initiative rechnen?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">100 Millionen Franken</div>
                        <div class="option" data-answer="wrong">200 Millionen Franken</div>
                        <div class="option" data-answer="correct">340 Millionen Franken (≈ 10% der Einkommenssteuern)</div>
                        <div class="option" data-answer="wrong">500 Millionen Franken</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Quiz abschließen ✓</button>
                </div>
            </div>

            <div class="completion-message" id="completion-message">
                <h3>🎉 Herzlichen Glückwunsch!</h3>
                <p>Sie haben alle Lernkontrollen zur geografischen Verteilung der Superreichen bearbeitet.</p>
                <p style="margin-top: 15px;">Ihr Fortschritt wurde gespeichert.</p>
            </div>

            <div class="navigation">
                <a href="artikel3.html" class="nav-button secondary">← Vorheriger Artikel</a>
                <a href="umfrage.html" class="nav-button">Umfrage →</a>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>

    <script>
        // === SLIDES ===
        let currentSlide = 1;
        const totalSlides = 8;

        function changeSlide(direction) {
            const slides = document.querySelectorAll('.slide');
            slides[currentSlide - 1].classList.remove('active');
            
            currentSlide += direction;
            
            if (currentSlide < 1) currentSlide = 1;
            if (currentSlide > totalSlides) currentSlide = totalSlides;
            
            slides[currentSlide - 1].classList.add('active');
            updateSlideProgress();
            
            // Buttons aktivieren/deaktivieren
            document.getElementById('prev-slide').disabled = (currentSlide === 1);
            document.getElementById('next-slide').disabled = (currentSlide === totalSlides);
            
            // Nach letzter Slide Aktivitäten freischalten
            if (currentSlide === totalSlides) {
                setTimeout(() => {
                    unlockRanking();
                }, 1000);
            }
        }

        function updateSlideProgress() {
            document.getElementById('slide-progress').textContent = `Seite ${currentSlide} von ${totalSlides}`;
        }

        function unlockRanking() {
            document.getElementById('ranking-section').classList.add('unlocked');
            document.getElementById('ranking-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // === AKTIVITÄTSSTATUS ===
        let activitiesCompleted = {
            ranking: false,
            matching: false,
            facts: false
        };

        // === KANTONS-RANKING DRAG & DROP ===
        let draggedElement = null;
        const placedCantons = {};

        document.querySelectorAll('.canton-chip').forEach(chip => {
            chip.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.classList.add('dragging');
            });

            chip.addEventListener('dragend', function() {
                this.classList.remove('dragging');
            });
        });

        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });

            zone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                if (draggedElement) {
                    const content = this.querySelector('.drop-zone-content');
                    const clone = draggedElement.cloneNode(true);
                    clone.draggable = false;
                    clone.style.cursor = 'default';
                    content.appendChild(clone);
                    
                    draggedElement.classList.add('placed');
                    draggedElement.draggable = false;
                    
                    const canton = draggedElement.dataset.canton;
                    const rank = this.dataset.rank;
                    placedCantons[canton] = rank;
                    
                    updateRankingProgress();
                    
                    if (Object.keys(placedCantons).length === 6) {
                        document.getElementById('check-ranking').disabled = false;
                    }
                }
            });
        });

        function updateRankingProgress() {
            const count = Object.keys(placedCantons).length;
            document.getElementById('ranking-progress').textContent = `${count} von 6 Kantonen zugeordnet`;
        }

        function checkRanking() {
            let allCorrect = true;
            const dropZones = document.querySelectorAll('.drop-zone');
            
            dropZones.forEach(zone => {
                const rank = zone.dataset.rank;
                const content = zone.querySelector('.drop-zone-content');
                const chip = content.querySelector('.canton-chip');
                
                if (chip) {
                    const correctRank = chip.dataset.rank;
                    if (correctRank === rank) {
                        zone.classList.add('correct');
                    } else {
                        zone.classList.add('incorrect');
                        allCorrect = false;
                    }
                }
            });

            const feedback = document.getElementById('ranking-feedback');
            if (allCorrect) {
                feedback.className = 'activity-feedback correct show';
                feedback.textContent = '✓ Perfekt! Alle Kantone wurden korrekt zugeordnet. Nidwalden weist dank Hergiswil mit Abstand die höchste Superreichen-Dichte auf.';
                activitiesCompleted.ranking = true;
                setTimeout(() => {
                    unlockMatching();
                }, 1500);
            } else {
                feedback.className = 'activity-feedback incorrect show';
                feedback.textContent = '✗ Nicht ganz. Einige Zuordnungen sind noch nicht korrekt. Versuchen Sie es erneut!';
                
                setTimeout(() => {
                    resetRanking();
                }, 3000);
            }
        }

        function resetRanking() {
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('correct', 'incorrect');
                zone.querySelector('.drop-zone-content').innerHTML = '';
            });
            
            document.querySelectorAll('.canton-chip').forEach(chip => {
                chip.classList.remove('placed');
                chip.draggable = true;
                chip.style.cursor = 'move';
            });
            
            Object.keys(placedCantons).forEach(key => delete placedCantons[key]);
            updateRankingProgress();
            document.getElementById('check-ranking').disabled = true;
            document.getElementById('ranking-feedback').classList.remove('show');
        }

        function unlockMatching() {
            document.getElementById('matching-section').classList.add('unlocked');
            document.getElementById('matching-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // === ZAHLEN-MATCHING ===
        let answeredMatching = new Set();
        const totalMatching = 4;

        document.querySelectorAll('.matching-card').forEach(card => {
            card.addEventListener('click', function() {
                const questionNum = this.dataset.question;
                if (answeredMatching.has(questionNum)) return;
                
                const isCorrect = this.dataset.answer === 'correct';
                const feedback = document.getElementById(`matching-feedback-${questionNum}`);
                const allCards = document.querySelectorAll(`[data-question="${questionNum}"]`);
                
                allCards.forEach(c => c.style.pointerEvents = 'none');
                this.classList.add('selected');
                
                setTimeout(() => {
                    if (isCorrect) {
                        this.classList.remove('selected');
                        this.classList.add('correct');
                        feedback.className = 'activity-feedback correct show';
                        feedback.textContent = '✓ Richtig! ' + getMatchingFeedback(questionNum);
                    } else {
                        this.classList.remove('selected');
                        this.classList.add('incorrect');
                        allCards.forEach(c => {
                            if (c.dataset.answer === 'correct') {
                                c.classList.add('correct');
                            }
                        });
                        feedback.className = 'activity-feedback incorrect show';
                        feedback.textContent = '✗ Nicht ganz. ' + getMatchingFeedback(questionNum);
                    }
                    
                    answeredMatching.add(questionNum);
                    updateMatchingProgress();
                    
                    if (answeredMatching.size === totalMatching && !activitiesCompleted.matching) {
                        activitiesCompleted.matching = true;
                        setTimeout(() => {
                            unlockFacts();
                        }, 1500);
                    }
                }, 500);
            });
        });

        function updateMatchingProgress() {
            document.getElementById('matching-progress').textContent = `${answeredMatching.size} von ${totalMatching} Fragen beantwortet`;
        }

        function getMatchingFeedback(questionNum) {
            const feedbacks = {
                '1': '59 Superreiche in einem Dorf von 6\'300 Einwohnern – das ist jeder hundertste!',
                '2': 'Die 2800 Superreichen zahlen 27% der Vermögenssteuern und zusätzlich 3,1% der Einkommenssteuern.',
                '3': 'Zürich würde 340 Millionen Franken Steuerausfälle erleiden, etwa 10% der Einkommenssteuern.',
                '4': 'Von 760 (2005) auf 2500 (2021) – eine Verdreifachung der Superreichen in nur 16 Jahren.'
            };
            return feedbacks[questionNum] || '';
        }

        function unlockFacts() {
            document.getElementById('facts-section').classList.add('unlocked');
            document.getElementById('facts-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            const badge = document.createElement('div');
            badge.className = 'unlock-badge';
            badge.textContent = '🔓 Faktencheck freigeschaltet!';
            badge.style.marginTop = '20px';
            document.getElementById('matching-section').appendChild(badge);
        }

        // === FAKTENCHECK ===
        let answeredFacts = new Set();
        const totalFacts = 4;

        document.querySelectorAll('.fact-card').forEach(card => {
            const buttons = card.querySelectorAll('.fact-btn');
            const factNum = card.dataset.fact;
            const isCorrect = card.dataset.correct === 'true';

            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    if (answeredFacts.has(factNum)) return;

                    const userAnswer = this.dataset.answer === 'true';
                    const feedback = card.querySelector('.fact-feedback');
                    const answerCorrect = userAnswer === isCorrect;

                    buttons.forEach(btn => btn.disabled = true);
                    
                    if (answerCorrect) {
                        this.classList.add('correct');
                        feedback.className = 'fact-feedback correct show';
                        feedback.textContent = '✓ Richtig! ' + getFactFeedback(factNum);
                    } else {
                        this.classList.add('incorrect');
                        buttons.forEach(btn => {
                            if ((btn.dataset.answer === 'true') === isCorrect) {
                                btn.classList.add('correct');
                            }
                        });
                        feedback.className = 'fact-feedback incorrect show';
                        feedback.textContent = '✗ Falsch. ' + getFactFeedback(factNum);
                    }

                    answeredFacts.add(factNum);
                    updateFactsProgress();

                    if (answeredFacts.size === totalFacts && !activitiesCompleted.facts) {
                        activitiesCompleted.facts = true;
                        setTimeout(() => {
                            unlockQuiz();
                        }, 1500);
                    }
                });
            });
        });

        function updateFactsProgress() {
            document.getElementById('facts-progress').textContent = `${answeredFacts.size} von ${totalFacts} Aussagen beantwortet`;
        }

        function getFactFeedback(factNum) {
            const feedbacks = {
                '1': 'Stimmt genau – 59 von 6\'300 Einwohnern entspricht etwa jedem hundertsten!',
                '2': 'Falsch! Nur Zug verzeichnet weiterhin Zuwachs. Heinz Tännler kann sich selbst nicht erklären warum.',
                '3': 'Richtig! Diese 250 Personen sind für mehr als die Hälfte der Vermögenssteuern verantwortlich.',
                '4': 'Korrekt! Mit 22 Superreichen pro 10\'000 Einwohner liegt Nidwalden deutlich vor Schwyz und Zug (je 18).'
            };
            return feedbacks[factNum] || '';
        }

        function unlockQuiz() {
            const quizSection = document.getElementById('quiz-section');
            quizSection.classList.remove('locked');
            quizSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            const badge = document.createElement('div');
            badge.className = 'unlock-badge';
            badge.textContent = '🔓 Lernkontrollen freigeschaltet!';
            badge.style.marginTop = '20px';
            document.getElementById('facts-section').appendChild(badge);
        }

        // === QUIZ ===
        let currentQuestion = 1;
        let answeredQuestions = new Set();
        const totalQuestions = 6;

        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                const questionNum = question.dataset.question;
                const options = question.querySelectorAll('.option');
                const feedback = question.querySelector('.feedback');
                const nextButton = question.querySelector('.next-button');
                
                if (answeredQuestions.has(questionNum)) return;
                
                options.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                const isCorrect = this.dataset.answer === 'correct';
                
                setTimeout(() => {
                    if (isCorrect) {
                        this.classList.add('correct');
                        feedback.className = 'feedback correct show';
                        feedback.textContent = '✓ Richtig! ' + getQuizFeedback(questionNum);
                    } else {
                        this.classList.add('incorrect');
                        options.forEach(opt => {
                            if (opt.dataset.answer === 'correct') {
                                opt.classList.add('correct');
                            }
                        });
                        feedback.className = 'feedback incorrect show';
                        feedback.textContent = '✗ Nicht ganz. ' + getQuizFeedback(questionNum);
                    }
                    
                    question.classList.add('answered');
                    answeredQuestions.add(questionNum);
                    nextButton.classList.add('show');
                    updateProgress();
                    
                    // Firebase tracking
                    trackQuizAnswer('artikel4', questionNum, isCorrect);
                }, 300);
            });
        });

        function showNextQuestion() {
            const currentQ = document.querySelector(`.question[data-question="${currentQuestion}"]`);
            currentQ.classList.remove('active');
            
            currentQuestion++;
            
            if (currentQuestion <= totalQuestions) {
                const nextQ = document.querySelector(`.question[data-question="${currentQuestion}"]`);
                nextQ.classList.add('active');
            } else {
                document.getElementById('completion-message').classList.add('show');
                markArticleComplete('artikel4');
            }
        }

        function updateProgress() {
            const progress = (answeredQuestions.size / totalQuestions) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('quiz-progress').textContent = `${answeredQuestions.size}/${totalQuestions}`;
        }

        function getQuizFeedback(questionNum) {
            const feedbacks = {
                '1': 'Das bedeutet: Jeder hundertste Hergiswiler ist ein Superreicher – eine extreme Konzentration!',
                '2': 'Dank Hergiswil weist Nidwalden mit 22 Superreichen pro 10\'000 Einwohner die mit Abstand höchste Dichte auf.',
                '3': 'Dazu kommen noch 3,1% der Einkommenssteuern. Bei einem Totalausfall hätte das spürbare Folgen für alle.',
                '4': 'Finanzdirektor Heinz Tännler kann sich selber nicht erklären, warum das Interesse von reichen Ausländern «ungebrochen hoch» ist.',
                '5': 'Diese Verdreifachung zeigt, wie stark die Schweiz in den letzten Jahren von Superreichen abhängig geworden ist.',
                '6': 'Das entspricht ungefähr 10 Prozent der Einkommenssteuern von natürlichen Personen im Kanton Zürich.'
            };
            return feedbacks[questionNum] || '';
        }

        // Beim Laden
        window.addEventListener('load', () => {
            document.getElementById('check-ranking').disabled = true;
            trackPageVisit('artikel4');
        });
    </script>
</body>
</html>
