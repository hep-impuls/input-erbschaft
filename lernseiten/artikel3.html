<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artikel: Schweiz im internationalen Vergleich - hep Verlag</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #003876 0%, #5eb9b4 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: #003876;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .article-link {
            background: #f8f9fa;
            border-left: 4px solid #5eb9b4;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .article-link h2 {
            color: #003876;
            margin-bottom: 10px;
        }

        /* Interaktive Sektionen */
        .interactive-section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .interactive-section h2 {
            color: #003876;
            margin-bottom: 20px;
            text-align: center;
        }

        .activity-progress {
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            color: #003876;
        }

        /* === TIMELINE-AKTIVIT√ÑT === */
        .timeline-game {
            margin-top: 25px;
        }

        .countries-pool {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .country-chip {
            background: linear-gradient(135deg, #003876, #5eb9b4);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-align: center;
            cursor: move;
            font-weight: 600;
            transition: all 0.3s;
            user-select: none;
        }

        .country-chip:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .country-chip.dragging {
            opacity: 0.5;
        }

        .country-chip.placed {
            background: #4caf50;
            cursor: default;
        }

        .timeline-drops {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .drop-zone {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: white;
            border: 3px dashed #e0e0e0;
            border-radius: 10px;
            min-height: 80px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            border-color: #5eb9b4;
            background: #e8f4f8;
        }

        .drop-zone.correct {
            border-color: #4caf50;
            background: #e8f5e9;
            border-style: solid;
        }

        .drop-zone.incorrect {
            border-color: #f44336;
            background: #ffebee;
            border-style: solid;
        }

        .drop-zone-year {
            font-size: 1.5em;
            font-weight: bold;
            color: #003876;
            min-width: 80px;
        }

        .drop-zone-content {
            flex: 1;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .timeline-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .timeline-feedback.show {
            display: block;
        }

        .timeline-feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .timeline-feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        .check-btn {
            background: #5eb9b4;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .check-btn:hover {
            background: #4a9a95;
            transform: translateY(-2px);
        }

        .check-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* === L√ÑNDERVERGLEICH === */
        .comparison-section {
            display: none;
        }

        .comparison-section.unlocked {
            display: block;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .country-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .country-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .country-card.selected {
            border-color: #5eb9b4;
            background: #e8f4f8;
        }

        .country-flag {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
        }

        .country-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #003876;
            text-align: center;
            margin-bottom: 15px;
        }

        .country-facts {
            font-size: 0.9em;
            line-height: 1.6;
        }

        .country-facts div {
            margin-bottom: 8px;
        }

        .comparison-question {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.1em;
            font-weight: 600;
            color: #856404;
        }

        .comparison-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .comparison-feedback.show {
            display: block;
        }

        .comparison-feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .comparison-feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        /* === FAKTENCHECK === */
        .facts-section {
            display: none;
        }

        .facts-section.unlocked {
            display: block;
        }

        .fact-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .fact-statement {
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #003876;
            font-weight: 600;
            line-height: 1.6;
        }

        .fact-buttons {
            display: flex;
            gap: 15px;
        }

        .fact-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .fact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .fact-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .fact-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .fact-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .fact-feedback.show {
            display: block;
        }

        .fact-feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .fact-feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        /* === QUIZ (GESPERRT) === */
        .quiz-section {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 3px solid #5eb9b4;
            position: relative;
        }

        .quiz-section.locked {
            opacity: 0.5;
            pointer-events: none;
        }

        .quiz-lock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 56, 118, 0.95);
            color: white;
            padding: 30px 40px;
            border-radius: 10px;
            text-align: center;
            z-index: 10;
            display: none;
        }

        .quiz-section.locked .quiz-lock-overlay {
            display: block;
        }

        .quiz-section h2 {
            color: #003876;
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        .question {
            background: #f8f9fa;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .question.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question.answered {
            border-color: #5eb9b4;
        }

        .question h3 {
            color: #003876;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: white;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #5eb9b4;
            transform: translateX(5px);
        }

        .option.selected {
            background: #5eb9b4;
            color: white;
            border-color: #5eb9b4;
        }

        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        .next-button {
            background: #003876;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1em;
            transition: background 0.3s;
            display: none;
        }

        .next-button.show {
            display: inline-block;
        }

        .next-button:hover {
            background: #002855;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #003876, #5eb9b4);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            color: #003876;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .unlock-badge {
            display: inline-block;
            background: #4caf50;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }

        .nav-button {
            background: #5eb9b4;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            text-decoration: none;
            display: inline-block;
            transition: background 0.3s;
        }

        .nav-button:hover {
            background: #4a9a95;
        }

        .nav-button.secondary {
            background: #003876;
        }

        .nav-button.secondary:hover {
            background: #002855;
        }

        .completion-message {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-top: 30px;
            display: none;
        }

        .completion-message.show {
            display: block;
        }

        .completion-message h3 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }

            .countries-pool, .comparison-grid {
                grid-template-columns: 1fr;
            }

            .fact-buttons {
                flex-direction: column;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåç Artikel: Internationaler Vergleich</h1>
            <p>Mit Erbschaftssteuern f√ºr Superreiche w√ºrde die Schweiz zum Super-Sonderfall</p>
        </div>

        <div class="content">
            <div class="article-link">
                <h2>üìÑ Originalartikel</h2>
                <p><strong>Autor:</strong> Simon Schmid</p>
                <p><strong>Thema:</strong> Juso-Initiative im L√§ndervergleich ‚Äì Historische Entwicklung der Erbschaftssteuern weltweit</p>
                <a href="#" style="display: inline-block; background: #5eb9b4; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; margin-top: 10px;" target="_blank">Artikel im Original lesen (freiwillig) ‚Üí</a>
            </div>

            <!-- === SCHRITT 1: TIMELINE-SPIEL === -->
            <div class="interactive-section">
                <h2>üìÖ Schritt 1: Zeitstrahl der Abschaffungen</h2>
                <p style="text-align: center; margin-bottom: 20px;">Ordnen Sie die L√§nder dem Jahr zu, in dem sie die Erbschaftssteuer abschafften. Ziehen Sie die L√§ndernamen auf die passenden Jahreszahlen.</p>
                <div class="activity-progress" id="timeline-progress">0 von 6 L√§ndern zugeordnet</div>
                
                <div class="timeline-game">
                    <div class="countries-pool" id="countries-pool">
                        <div class="country-chip" draggable="true" data-country="kanada" data-year="1971">üá®üá¶ Kanada</div>
                        <div class="country-chip" draggable="true" data-country="australien" data-year="1979">üá¶üá∫ Australien</div>
                        <div class="country-chip" draggable="true" data-country="neuseeland" data-year="2001">üá≥üáø Neuseeland</div>
                        <div class="country-chip" draggable="true" data-country="schweden" data-year="2004">üá∏üá™ Schweden</div>
                        <div class="country-chip" draggable="true" data-country="oesterreich" data-year="2008">üá¶üáπ √ñsterreich</div>
                        <div class="country-chip" draggable="true" data-country="norwegen" data-year="2013">üá≥üá¥ Norwegen</div>
                    </div>

                    <div class="timeline-drops">
                        <div class="drop-zone" data-year="1971">
                            <div class="drop-zone-year">1971</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-year="1979">
                            <div class="drop-zone-year">1979</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-year="2001">
                            <div class="drop-zone-year">2001</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-year="2004">
                            <div class="drop-zone-year">2004</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-year="2008">
                            <div class="drop-zone-year">2008</div>
                            <div class="drop-zone-content"></div>
                        </div>
                        <div class="drop-zone" data-year="2013">
                            <div class="drop-zone-year">2013</div>
                            <div class="drop-zone-content"></div>
                        </div>
                    </div>

                    <button class="check-btn" id="check-timeline" onclick="checkTimeline()">√úberpr√ºfen</button>
                    <div class="timeline-feedback" id="timeline-feedback"></div>
                </div>
            </div>

            <!-- === SCHRITT 2: L√ÑNDERVERGLEICH === -->
            <div class="interactive-section comparison-section" id="comparison-section">
                <h2>üåê Schritt 2: L√§nderspezifika verstehen</h2>
                <p style="text-align: center; margin-bottom: 20px;">W√§hlen Sie das Land aus, auf das die folgende Aussage zutrifft.</p>
                <div class="activity-progress" id="comparison-progress">0 von 3 Fragen beantwortet</div>

                <!-- Frage 1 -->
                <div class="comparison-question" data-question="1" data-correct="schweden">
                    Welches Land schaffte die Erbschaftssteuer unter einer sozialdemokratischen Regierung ab, weil Ausnahmen dazu f√ºhrten, dass die Mittelklasse die Hauptlast trug?
                </div>
                <div class="comparison-grid">
                    <div class="country-card" data-answer="schweden">
                        <div class="country-flag">üá∏üá™</div>
                        <div class="country-name">Schweden</div>
                        <div class="country-facts">
                            <div><strong>Abschaffung:</strong> 2004</div>
                            <div><strong>Regierung:</strong> Sozialdemokratisch</div>
                            <div><strong>Grund:</strong> Ungerechte Lastverteilung</div>
                        </div>
                    </div>
                    <div class="country-card" data-answer="norwegen">
                        <div class="country-flag">üá≥üá¥</div>
                        <div class="country-name">Norwegen</div>
                        <div class="country-facts">
                            <div><strong>Abschaffung:</strong> 2013</div>
                            <div><strong>Besonderheit:</strong> Trotz hohem Wohlfahrtsstaat</div>
                            <div><strong>Grund:</strong> Kapitalmobilit√§t</div>
                        </div>
                    </div>
                    <div class="country-card" data-answer="oesterreich">
                        <div class="country-flag">üá¶üáπ</div>
                        <div class="country-name">√ñsterreich</div>
                        <div class="country-facts">
                            <div><strong>Abschaffung:</strong> 2008</div>
                            <div><strong>Besonderheit:</strong> Erste Einf√ºhrung 1759</div>
                            <div><strong>Grund:</strong> Praktische Probleme</div>
                        </div>
                    </div>
                </div>
                <div class="comparison-feedback" id="comparison-feedback-1"></div>

                <!-- Frage 2 -->
                <div class="comparison-question" data-question="2" data-correct="oesterreich" style="margin-top: 40px;">
                    Welches Land f√ºhrte als eines der ersten 1759 eine Erbschaftssteuer zur Kriegsfinanzierung ein (Siebenj√§hriger Krieg)?
                </div>
                <div class="comparison-grid">
                    <div class="country-card" data-answer="schweiz">
                        <div class="country-flag">üá®üá≠</div>
                        <div class="country-name">Schweiz</div>
                        <div class="country-facts">
                            <div><strong>Besonderheit:</strong> F√∂deralismus</div>
                            <div><strong>Heute:</strong> Doppelbesteuerung (Verm√∂gen + Erbe)</div>
                            <div><strong>Status:</strong> ¬´Super-Sonderfall¬ª</div>
                        </div>
                    </div>
                    <div class="country-card" data-answer="oesterreich">
                        <div class="country-flag">üá¶üáπ</div>
                        <div class="country-name">√ñsterreich</div>
                        <div class="country-facts">
                            <div><strong>Erste Einf√ºhrung:</strong> 1759</div>
                            <div><strong>Anlass:</strong> Siebenj√§hriger Krieg</div>
                            <div><strong>Abschaffung:</strong> 2008</div>
                        </div>
                    </div>
                    <div class="country-card" data-answer="grossbritannien">
                        <div class="country-flag">üá¨üáß</div>
                        <div class="country-name">Grossbritannien</div>
                        <div class="country-facts">
                            <div><strong>Einf√ºhrung:</strong> 1796</div>
                            <div><strong>Anlass:</strong> Krieg gegen Napoleon</div>
                            <div><strong>Status:</strong> Noch aktiv</div>
                        </div>
                    </div>
                </div>
                <div class="comparison-feedback" id="comparison-feedback-2"></div>

                <!-- Frage 3 -->
                <div class="comparison-question" data-question="3" data-correct="schweiz" style="margin-top: 40px;">
                    Welches Land hat heute noch sowohl eine Verm√∂genssteuer ALS AUCH eine Erbschaftssteuer - fast weltweit einzigartig?
                </div>
                <div class="comparison-grid">
                    <div class="country-card" data-answer="usa">
                        <div class="country-flag">üá∫üá∏</div>
                        <div class="country-name">USA</div>
                        <div class="country-facts">
                            <div><strong>Freibetrag:</strong> 15 Mio. Dollar (geplant)</div>
                            <div><strong>Problem:</strong> Viele Schlupfl√∂cher</div>
                            <div><strong>Status:</strong> Hohe Steuers√§tze, wenig Einnahmen</div>
                        </div>
                    </div>
                    <div class="country-card" data-answer="deutschland">
                        <div class="country-flag">üá©üá™</div>
                        <div class="country-name">Deutschland</div>
                        <div class="country-facts">
                            <div><strong>Status:</strong> Hat Erbschaftssteuer</div>
                            <div><strong>Debatte:</strong> √úber h√∂here Steuern</div>
                            <div><strong>Besonderheit:</strong> Keine Verm√∂genssteuer</div>
                        </div>
                    </div>
                    <div class="country-card" data-answer="schweiz">
                        <div class="country-flag">üá®üá≠</div>
                        <div class="country-name">Schweiz</div>
                        <div class="country-facts">
                            <div><strong>Besonderheit:</strong> Beide Steuern!</div>
                            <div><strong>Problem:</strong> Doppelbesteuerung</div>
                            <div><strong>Status:</strong> Fast weltweit einzigartig</div>
                        </div>
                    </div>
                </div>
                <div class="comparison-feedback" id="comparison-feedback-3"></div>
            </div>

            <!-- === SCHRITT 3: FAKTENCHECK === -->
            <div class="interactive-section facts-section" id="facts-section">
                <h2>‚úÖ Schritt 3: Historische Fakten √ºberpr√ºfen</h2>
                <p style="text-align: center; margin-bottom: 20px;">Richtig oder falsch? Entscheiden Sie bei den folgenden Aussagen.</p>
                <div class="activity-progress" id="facts-progress">0 von 4 Aussagen beantwortet</div>

                <div class="fact-card" data-fact="1" data-correct="true">
                    <div class="fact-statement">
                        Historisch wurden Erbschaftssteuern h√§ufig zur Kriegsfinanzierung eingef√ºhrt, etwa in √ñsterreich 1759 oder Grossbritannien 1796.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">‚úì Richtig</button>
                        <button class="fact-btn" data-answer="false">‚úó Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>

                <div class="fact-card" data-fact="2" data-correct="false">
                    <div class="fact-statement">
                        Die Schweiz ist das einzige Land weltweit, das heute noch eine Erbschaftssteuer kennt.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">‚úì Richtig</button>
                        <button class="fact-btn" data-answer="false">‚úó Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>

                <div class="fact-card" data-fact="3" data-correct="true">
                    <div class="fact-statement">
                        Weniger als 0,5% der gesamten Steuereinnahmen in OECD-L√§ndern stammen heute aus Erbschaftssteuern.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">‚úì Richtig</button>
                        <button class="fact-btn" data-answer="false">‚úó Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>

                <div class="fact-card" data-fact="4" data-correct="true">
                    <div class="fact-statement">
                        Die Kombination von 50% Steuersatz und 50 Millionen Franken Freibetrag in der Juso-Initiative ist weltweit einzigartig.
                    </div>
                    <div class="fact-buttons">
                        <button class="fact-btn" data-answer="true">‚úì Richtig</button>
                        <button class="fact-btn" data-answer="false">‚úó Falsch</button>
                    </div>
                    <div class="fact-feedback"></div>
                </div>
            </div>

            <!-- === QUIZ (GESPERRT) === -->
            <div class="quiz-section locked" id="quiz-section">
                <div class="quiz-lock-overlay">
                    <h3>üîí Quiz gesperrt</h3>
                    <p>Bitte schlie√üen Sie erst alle drei interaktiven Aktivit√§ten ab, um das Quiz freizuschalten.</p>
                </div>

                <h2>üìù Kontrollfragen zum Artikel</h2>
                <div class="progress-text">Fortschritt: <span id="quiz-progress">0/6</span> Fragen beantwortet</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <!-- Frage 1 -->
                <div class="question active" data-question="1">
                    <h3>Frage 1 von 6: Wof√ºr wurden Erbschaftssteuern historisch oft eingef√ºhrt?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Zur Finanzierung von Infrastrukturprojekten</div>
                        <div class="option" data-answer="correct">Zur Kriegsfinanzierung</div>
                        <div class="option" data-answer="wrong">Zur Umverteilung von Verm√∂gen</div>
                        <div class="option" data-answer="wrong">Zur Finanzierung des Bildungssystems</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">N√§chste Frage ‚Üí</button>
                </div>

                <!-- Frage 2 -->
                <div class="question" data-question="2">
                    <h3>Frage 2 von 6: Was macht die Schweiz im internationalen Vergleich besonders?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Sie hat die h√∂chsten Erbschaftssteuern weltweit</div>
                        <div class="option" data-answer="correct">Sie hat sowohl Verm√∂genssteuer als auch Erbschaftssteuer ‚Äì fast einzigartig</div>
                        <div class="option" data-answer="wrong">Sie hat die Erbschaftssteuer 2013 abgeschafft</div>
                        <div class="option" data-answer="wrong">Sie besteuert nur Nicht-Verwandte, nicht aber direkte Nachkommen</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">N√§chste Frage ‚Üí</button>
                </div>

                <!-- Frage 3 -->
                <div class="question" data-question="3">
                    <h3>Frage 3 von 6: Welches Land schaffte 2004 die Erbschaftssteuer ab, obwohl eine sozialdemokratische Regierung an der Macht war?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Norwegen</div>
                        <div class="option" data-answer="correct">Schweden</div>
                        <div class="option" data-answer="wrong">√ñsterreich</div>
                        <div class="option" data-answer="wrong">Australien</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">N√§chste Frage ‚Üí</button>
                </div>

                <!-- Frage 4 -->
                <div class="question" data-question="4">
                    <h3>Frage 4 von 6: Wie viel Prozent der gesamten Steuereinnahmen in OECD-L√§ndern stammen heute aus Erbschaftssteuern?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Etwa 5 Prozent</div>
                        <div class="option" data-answer="wrong">Etwa 2 Prozent</div>
                        <div class="option" data-answer="correct">Weniger als 0,5 Prozent</div>
                        <div class="option" data-answer="wrong">Etwa 10 Prozent</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">N√§chste Frage ‚Üí</button>
                </div>

                <!-- Frage 5 -->
                <div class="question" data-question="5">
                    <h3>Frage 5 von 6: Warum bezeichnet Laura Seelkopf die Juso-Initiative als ¬´sehr ungew√∂hnlich¬ª?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Weil sie zu niedrige Steuers√§tze vorsieht</div>
                        <div class="option" data-answer="correct">Weil die Kombination von 50% Steuersatz und 50 Mio. Freibetrag weltweit einzigartig ist</div>
                        <div class="option" data-answer="wrong">Weil sie auch kleine Erbschaften besteuert</div>
                        <div class="option" data-answer="wrong">Weil sie nur f√ºr ausl√§ndische Erben gilt</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">N√§chste Frage ‚Üí</button>
                </div>

                <!-- Frage 6 -->
                <div class="question" data-question="6">
                    <h3>Frage 6 von 6: Welcher Grund wird im Artikel NICHT als Erkl√§rung f√ºr den R√ºckgang der Erbschaftssteuern genannt?</h3>
                    <div class="options">
                        <div class="option" data-answer="wrong">Fehlende Dringlichkeit in Friedenszeiten</div>
                        <div class="option" data-answer="wrong">Praktische Probleme f√ºr Erben von Familienbetrieben</div>
                        <div class="option" data-answer="correct">Steigende Lebenserwartung der Bev√∂lkerung</div>
                        <div class="option" data-answer="wrong">Zunehmende Kapitalmobilit√§t durch Globalisierung</div>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-button" onclick="showNextQuestion()">Quiz abschlie√üen ‚úì</button>
                </div>
            </div>

            <div class="completion-message" id="completion-message">
                <h3>üéâ Herzlichen Gl√ºckwunsch!</h3>
                <p>Sie haben alle Kontrollfragen zum internationalen Vergleich bearbeitet.</p>
                <p style="margin-top: 15px;">Ihr Fortschritt wurde gespeichert.</p>
            </div>

            <div class="navigation">
                <a href="artikel2.html" class="nav-button secondary">‚Üê Vorheriger Artikel</a>
                <a href="artikel4.html" class="nav-button">N√§chster Artikel ‚Üí</a>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="../firebase-config.js"></script>

    <script>
        // === AKTIVIT√ÑTSSTATUS ===
        let activitiesCompleted = {
            timeline: false,
            comparison: false,
            facts: false
        };

        // === TIMELINE DRAG & DROP ===
        let draggedElement = null;
        const placedCountries = {};

        document.querySelectorAll('.country-chip').forEach(chip => {
            chip.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.classList.add('dragging');
            });

            chip.addEventListener('dragend', function() {
                this.classList.remove('dragging');
            });
        });

        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });

            zone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                if (draggedElement) {
                    const content = this.querySelector('.drop-zone-content');
                    const clone = draggedElement.cloneNode(true);
                    clone.draggable = false;
                    clone.style.cursor = 'default';
                    content.appendChild(clone);
                    
                    draggedElement.classList.add('placed');
                    draggedElement.draggable = false;
                    
                    const country = draggedElement.dataset.country;
                    const year = this.dataset.year;
                    placedCountries[country] = year;
                    
                    updateTimelineProgress();
                    
                    if (Object.keys(placedCountries).length === 6) {
                        document.getElementById('check-timeline').disabled = false;
                    }
                }
            });
        });

        function updateTimelineProgress() {
            const count = Object.keys(placedCountries).length;
            document.getElementById('timeline-progress').textContent = `${count} von 6 L√§ndern zugeordnet`;
        }

        function checkTimeline() {
            let allCorrect = true;
            const dropZones = document.querySelectorAll('.drop-zone');
            
            dropZones.forEach(zone => {
                const year = zone.dataset.year;
                const content = zone.querySelector('.drop-zone-content');
                const chip = content.querySelector('.country-chip');
                
                if (chip) {
                    const correctYear = chip.dataset.year;
                    if (correctYear === year) {
                        zone.classList.add('correct');
                    } else {
                        zone.classList.add('incorrect');
                        allCorrect = false;
                    }
                }
            });

            const feedback = document.getElementById('timeline-feedback');
            if (allCorrect) {
                feedback.className = 'timeline-feedback correct show';
                feedback.textContent = '‚úì Perfekt! Alle L√§nder wurden korrekt zugeordnet. Diese L√§nder haben √ºber einen Zeitraum von 42 Jahren die Erbschaftssteuer abgeschafft.';
                activitiesCompleted.timeline = true;
                setTimeout(() => {
                    unlockComparison();
                }, 1500);
            } else {
                feedback.className = 'timeline-feedback incorrect show';
                feedback.textContent = '‚úó Nicht ganz. Einige Zuordnungen sind noch nicht korrekt. Versuchen Sie es erneut!';
                
                setTimeout(() => {
                    resetTimeline();
                }, 3000);
            }
        }

        function resetTimeline() {
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('correct', 'incorrect');
                zone.querySelector('.drop-zone-content').innerHTML = '';
            });
            
            document.querySelectorAll('.country-chip').forEach(chip => {
                chip.classList.remove('placed');
                chip.draggable = true;
                chip.style.cursor = 'move';
            });
            
            Object.keys(placedCountries).forEach(key => delete placedCountries[key]);
            updateTimelineProgress();
            document.getElementById('check-timeline').disabled = true;
            document.getElementById('timeline-feedback').classList.remove('show');
        }

        function unlockComparison() {
            document.getElementById('comparison-section').classList.add('unlocked');
            document.getElementById('comparison-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // === L√ÑNDERVERGLEICH ===
        let answeredComparisons = new Set();
        const totalComparisons = 3;

        document.querySelectorAll('.country-card').forEach(card => {
            card.addEventListener('click', function() {
                const question = this.closest('.comparison-question, [data-question]');
                if (!question) return;
                
                const questionNum = question.dataset.question;
                if (answeredComparisons.has(questionNum)) return;
                
                const correctAnswer = question.dataset.correct;
                const userAnswer = this.dataset.answer;
                const feedback = document.getElementById(`comparison-feedback-${questionNum}`);
                
                const allCards = question.nextElementSibling.querySelectorAll('.country-card');
                allCards.forEach(c => c.style.pointerEvents = 'none');
                
                this.classList.add('selected');
                
                setTimeout(() => {
                    if (userAnswer === correctAnswer) {
                        feedback.className = 'comparison-feedback correct show';
                        feedback.textContent = '‚úì Richtig! ' + getComparisonFeedback(questionNum);
                    } else {
                        feedback.className = 'comparison-feedback incorrect show';
                        feedback.textContent = '‚úó Nicht ganz. ' + getComparisonFeedback(questionNum);
                        allCards.forEach(c => {
                            if (c.dataset.answer === correctAnswer) {
                                c.classList.add('selected');
                            }
                        });
                    }
                    
                    answeredComparisons.add(questionNum);
                    updateComparisonProgress();
                    
                    if (answeredComparisons.size === totalComparisons && !activitiesCompleted.comparison) {
                        activitiesCompleted.comparison = true;
                        setTimeout(() => {
                            unlockFacts();
                        }, 1500);
                    }
                }, 500);
            });
        });

        function updateComparisonProgress() {
            document.getElementById('comparison-progress').textContent = `${answeredComparisons.size} von ${totalComparisons} Fragen beantwortet`;
        }

        function getComparisonFeedback(questionNum) {
            const feedbacks = {
                '1': 'Schweden schaffte 2004 unter sozialdemokratischer Regierung die Erbschaftssteuer ab, weil Ausnahmen dazu f√ºhrten, dass die Mittelklasse die Hauptlast trug.',
                '2': '√ñsterreich f√ºhrte 1759 zur Finanzierung des Siebenj√§hrigen Krieges eine der ersten Erbschaftssteuern ein.',
                '3': 'Die Schweiz ist mit ihrer Doppelbesteuerung (Verm√∂gen UND Erbe) fast weltweit einzigartig ‚Äì die meisten L√§nder haben nur eine der beiden Steuern.'
            };
            return feedbacks[questionNum] || '';
        }

        function unlockFacts() {
            document.getElementById('facts-section').classList.add('unlocked');
            document.getElementById('facts-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            const badge = document.createElement('div');
            badge.className = 'unlock-badge';
            badge.textContent = 'üîì Faktencheck freigeschaltet!';
            badge.style.marginTop = '20px';
            document.getElementById('comparison-section').appendChild(badge);
        }

        // === FAKTENCHECK ===
        let answeredFacts = new Set();
        const totalFacts = 4;

        document.querySelectorAll('.fact-card').forEach(card => {
            const buttons = card.querySelectorAll('.fact-btn');
            const factNum = card.dataset.fact;
            const isCorrect = card.dataset.correct === 'true';

            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    if (answeredFacts.has(factNum)) return;

                    const userAnswer = this.dataset.answer === 'true';
                    const feedback = card.querySelector('.fact-feedback');
                    const answerCorrect = userAnswer === isCorrect;

                    buttons.forEach(btn => btn.disabled = true);
                    
                    if (answerCorrect) {
                        this.classList.add('correct');
                        feedback.className = 'fact-feedback correct show';
                        feedback.textContent = '‚úì Richtig! ' + getFactFeedback(factNum);
                    } else {
                        this.classList.add('incorrect');
                        buttons.forEach(btn => {
                            if ((btn.dataset.answer === 'true') === isCorrect) {
                                btn.classList.add('correct');
                            }
                        });
                        feedback.className = 'fact-feedback incorrect show';
                        feedback.textContent = '‚úó Falsch. ' + getFactFeedback(factNum);
                    }

                    answeredFacts.add(factNum);
                    updateFactsProgress();

                    if (answeredFacts.size === totalFacts && !activitiesCompleted.facts) {
                        activitiesCompleted.facts = true;
                        setTimeout(() => {
                            unlockQuiz();
                        }, 1500);
                    }
                });
            });
        });

        function updateFactsProgress() {
            document.getElementById('facts-progress').textContent = `${answeredFacts.size} von ${totalFacts} Aussagen beantwortet`;
        }

        function getFactFeedback(factNum) {
            const feedbacks = {
                '1': '√ñsterreich 1759 (Siebenj√§hriger Krieg) und Grossbritannien 1796 (Krieg gegen Napoleon) sind historische Beispiele.',
                '2': 'Falsch! Etwa 50% der L√§nder weltweit kennen heute noch eine Form der Erbschaftssteuer.',
                '3': 'Richtig! Dieser drastische R√ºckgang zeigt die geringe Bedeutung von Erbschaftssteuern in den meisten OECD-L√§ndern heute.',
                '4': 'Richtig! Laura Seelkopf bezeichnet diese Kombination als ¬´sehr ungew√∂hnlich¬ª und weltweit einzigartig.'
            };
            return feedbacks[factNum] || '';
        }

        function unlockQuiz() {
            const quizSection = document.getElementById('quiz-section');
            quizSection.classList.remove('locked');
            quizSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            const badge = document.createElement('div');
            badge.className = 'unlock-badge';
            badge.textContent = 'üîì Quiz freigeschaltet!';
            badge.style.marginTop = '20px';
            document.getElementById('facts-section').appendChild(badge);
        }

        // === QUIZ ===
        let currentQuestion = 1;
        let answeredQuestions = new Set();
        const totalQuestions = 6;

        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                const questionNum = question.dataset.question;
                const options = question.querySelectorAll('.option');
                const feedback = question.querySelector('.feedback');
                const nextButton = question.querySelector('.next-button');
                
                if (answeredQuestions.has(questionNum)) return;
                
                options.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                const isCorrect = this.dataset.answer === 'correct';
                
                setTimeout(() => {
                    if (isCorrect) {
                        this.classList.add('correct');
                        feedback.className = 'feedback correct show';
                        feedback.textContent = '‚úì Richtig! ' + getCorrectFeedback(questionNum);
                    } else {
                        this.classList.add('incorrect');
                        options.forEach(opt => {
                            if (opt.dataset.answer === 'correct') {
                                opt.classList.add('correct');
                            }
                        });
                        feedback.className = 'feedback incorrect show';
                        feedback.textContent = '‚úó Nicht ganz. ' + getCorrectFeedback(questionNum);
                    }
                    
                    question.classList.add('answered');
                    answeredQuestions.add(questionNum);
                    nextButton.classList.add('show');
                    updateProgress();
                }, 300);
            });
        });

        function showNextQuestion() {
            const currentQ = document.querySelector(`[data-question="${currentQuestion}"]`);
            currentQ.classList.remove('active');
            
            currentQuestion++;
            
            if (currentQuestion <= totalQuestions) {
                const nextQ = document.querySelector(`[data-question="${currentQuestion}"]`);
                nextQ.classList.add('active');
            } else {
                document.getElementById('completion-message').classList.add('show');
            }
        }

        function updateProgress() {
            const progress = (answeredQuestions.size / totalQuestions) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('quiz-progress').textContent = `${answeredQuestions.size}/${totalQuestions}`;
        }

        function getCorrectFeedback(questionNum) {
            const feedbacks = {
                '1': '√ñsterreich f√ºhrte sie 1759 zur Finanzierung des Siebenj√§hrigen Krieges ein, Grossbritannien 1796 im Krieg gegen Napoleon.',
                '2': 'Praktisch kein anderes Land hat beide Steuern ‚Äì die meisten kennen entweder die eine oder die andere Variante.',
                '3': 'In Schweden schaffte ausgerechnet eine sozialdemokratische Regierung die Erbschaftssteuer ab ‚Äì nachdem Ausnahmen dazu f√ºhrten, dass die Mittelklasse die Hauptlast trug.',
                '4': 'Dieser drastische R√ºckgang zeigt die geringe Bedeutung von Erbschaftssteuern in den meisten OECD-L√§ndern heute.',
                '5': 'Seelkopf findet ein anderes Design geeigneter: eine moderate Steuer schon ab moderaten Summen.',
                '6': 'Die genannten Gr√ºnde sind: fehlende Dringlichkeit in Friedenszeiten, praktische Probleme, unfaire Lastverteilung und zunehmende Kapitalmobilit√§t.'
            };
            return feedbacks[questionNum] || '';
        }

        // Beim Laden
        window.addEventListener('load', () => {
            document.getElementById('check-timeline').disabled = true;
            console.log('Page visited: artikel3');
        });
    </script>
</body>
</html>
